<!DOCTYPE html>
<html>
<head>
    <title>JsFrame.js yosemite</title>
    <meta charset="utf-8">
    <meta name="description" content="A javascript popup/floating window library.">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
</head>
<!--<body style="overflow: hidden;background: url('https://upload.wikimedia.org/wikipedia/commons/c/c5/Kurumayama_K%C5%8Dgen_Snow_Resort_2.jpg') 50% no-repeat fixed; background-size: cover;">-->
<body>

<button id="bt_open" type="button" onclick="rest()" class="btn btn-primary">BUTTON</button>
<!--<script src="https://riversun.github.io/jsframe/jsframe.js"></script>-->
<script src="../../jsframe.js"></script>
<script>

    const jsFrame = new JSFrame({
        horizontalAlign: 'right',
        verticalAlign: 'bottom',
    });

    function rest() {
        var frame = jsFrame.getWindowByName('Win0');
        frame.control.doDehide();
    }

    function start() {

        const frames = [];

        for (let i = 0; i < 2; i++) {

            const frame = jsFrame.create({
                name: `Win${i}`,
                title: `Win${i} - Win10 style`,
                left: -520 + (320 + 20) * i, top: -550, width: 320, height: 220, minWidth: 200, minHeight: 110,
                appearanceName: 'redstone',
                style: {
                    backgroundColor: 'rgba(255,255,255,0.95)',
                    overflow: 'hidden'
                },
                html: '<div style="padding:10px;background:darkcyan;height:100%">Your contents here.</div>'
            }).show();

            frame.setControl({
                animation: true,//ウィンドウ開閉時のアニメーション有効
                animationDuration: 200,//アニメーションの1アクション時間あたりの長さのデフォルト値
                minimizeButton: 'minimizeButton',
                maximizeButton: 'maximizeButton',
                demaximizeButton: 'restoreButton',
                deminimizeButton: 'deminimizeButton'
            });

            //maximizedイベントを直接ハンドリングしたい場合
            frame.control.on('maximized', (frame, info) => {  //最大化した後に呼び出されるコールバック
                jsFrame.showToast({
                    text: 'マックスです', align: 'center'
                });
            });

            const frmc = frame.control;

            frame.on('minimizeButton', 'click', (_frame, evt) => {

                //'minimizeButton'が押されたときに、最小化したい場合
                _frame.control.doMinimize({
                    duration: 100,
                    callback: (frame, info) => {
                        jsFrame.showToast({
                            text: frame.getName() + ' ' + info.eventType
                        });
                    }
                });

            });
            frame.on('deminimizeButton', 'click', (_frame, evt) => {
                frmc.doDeminimize({
                    duration: 100,//最小化状態から戻るときのアニメーション時間(ms)
                    callback: (frame, info) => {
                        jsFrame.showToast({
                            text: frame.getName() + ' ' + info.eventType
                        });
                    }
                });
            });


            frame.on('maximizeButton', 'click', (_frame, evt) => {
                frmc.doMaximize({
                    hideTitleBar: true, //true:最大化したときにタイトルバーを隠す
                    restoreKey: 'Escape',//タイトルバーが隠れたときに復帰するためのキー指定
                    duration: 100,//最大化するときのアニメーション時間
                    restoreDuration: 100,//最大化から元に戻るときのアニメーション時間（タイトルバーが無い場合)
                    callback: (frame, info) => {  //最大化した後に呼び出されるコールバック
                        jsFrame.showToast({
                            text: frame.getName() + ' ' + info.eventType
                        });
                    },
                    restoreCallback: (frame, info) => {//最大化から戻ったときに呼び出されるコールバック(タイトルバーが無い場合)
                        jsFrame.showToast({
                            text: frame.getName() + ' ' + info.eventType
                        });
                    },
                });
            });

            frame.on('restoreButton', 'click', (_frame, evt) => {
                frmc.doDemaximize(
                    {
                        duration: 100,
                        callback: (frame, info) => {
                            jsFrame.showToast({
                                text: frame.getName() + ' ' + info.eventType
                            });
                        }
                    });
            });

            frame.on('closeButton', 'click', (_frame, evt) => {
                //

                frmc.doHide({
                    align: 'CENTER_BOTTOM',
                    callback: (frame, info) => {
                        jsFrame.showToast({
                            text: frame.getName() + ' ' + info.eventType
                        });
                        _frame.closeFrame();
                    }
                })
            });
            frames.push(frame);
        }

        frames[0].requestFocus();
        jsFrame.showToast({html: `hello${window.innerHeight}`, align: 'center'});
    }

    start();
</script>
<div style="color:white"><a href="https://github.com/riversun/JSFrame.js">JSFrame.js</a> Example : Preset style redstone
</div>

<div
        style="font-size: 12px; color: white; position: fixed; right: 10px; bottom: 10px">
    Photo by Ski Mania License: CC-BY-SA 4.0
</div>
</body>
</html>