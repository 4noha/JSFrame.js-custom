!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(){return function(n){var r={};function a(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}return a.m=n,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"JSFrame",function(){return l});var B={},x={};function r(){var r=this;this.showTitleBar=!0,this.showCloseButton=!0,this.titleBarCaption="",this.titleBarCaptionFontSize="12px",this.titleBarCaptionFontWeight="bold",this.titleBarHeight="24px",this.useIframe=!1,this.useFrame=!0,this.setUseIFrame=function(e){return r.useIframe=e,r.useFrame=!e,r},this.titleBarCaptionLeftMargin="5px",this.titleBarColorDefault="lightgray",this.titleBarColorFocused="#d3e1ee",this.titleBarCaptionColorDefault="",this.titleBarCaptionColorFocused="",this.titleBarBorderBottomDefault="1px solid rgba(0,0,0,0.2)",this.titleBarBorderBottomFocused=null,this.frameBorderRadius="6px",this.frameBorderWidthDefault="1px",this.frameBorderWidthFocused=this.frameBorderWidthDefault,this.frameBorderColorDefault="rgba(1, 1, 1, 0.2)",this.frameBorderColorFocused=this.frameBorderColorDefault,this.frameBorderStyle="solid",this.frameBoxShadow="2px 3px 16px rgba(0,0,0,.6)",this.frameBackgroundColor="transparent",this._partsBuilder=null,this.frameComponents=[],this.frameHeightAdjust=1,this.getFrameInnerBorderRadius=function(e,t){if(e)return t?parseInt(e.frameBorderRadius,10)-parseInt(e.frameBorderWidthFocused,10)+"px":parseInt(e.frameBorderRadius,10)-parseInt(e.frameBorderWidthDefault,10)+"px"},this.onInitialize=function(){if(r.showCloseButton){var e=r.getPartsBuilder(),t=e.buildTextButtonAppearance();t.size=14,t.captionShiftYpx=0,t.captionFontRatio=1,t.borderRadius=2,t.backgroundColorPressed="transparent",t.backgroundColorDefault="transparent",t.caption="✖",t.captionColorDefault="gray",t.captionColorFocused="gray",t.captionColorHovered="silver",t.captionColorPressed="black",t.borderWidth=0,t.borderColorDefault="#aaaaaa",t.borderStyle="solid";var n=e.buildTextButton(t);r.addFrameComponent("closeButton",n,-10,-20,"RIGHT_TOP")}}}function a(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n,(e.prototype.constructor=e).superConstructor=t,e.superClass=t.prototype}function o(e,t,n,r,a,o){var l=this;l.id=e,l.property={},l.parentCanvas=null,l.htmlElement=null,l.htmlElement=document.createElement(B.CBEAN.HTML_ELEMENT),l.htmlElement.id=B.CBEAN.HTML_ELEMENT_ID_PREFIX+e,l.htmlElement.style.position="absolute",l.htmlElement.style.left=parseInt(t,10)+"px",l.htmlElement.style.top=parseInt(n,10)+"px",l.htmlElement.style.width=parseInt(r,10)+"px",l.htmlElement.style.height=parseInt(a,10)+"px",null!==o&&(l.htmlElement.style.zIndex=o),l.htmlElement.style.borderColor="#000000",l.htmlElement.style.fontSize="1px",(l.htmlElement.parent=l).htmlElement.onmousedown=l.onmouseDown,l.htmlElement.typeName=B.CBEAN.TYPE_NAME,l.htmlElement.usage="nothing",l.htmlElement.isRangeLimited=!1,l.htmlElement.argX=1,l.htmlElement.argY=1,l.externalAreaClickedListener=null}function I(e,t,n,r,a,o){var l=this;l.currentObject=null,l.onTopObject=null,l.offsetX=0,l.offsetY=0,l.mouseDownSource=null,l.id=t,l.canvasElement=null,l.parentElement=e,l.beanList=new Array,l.beanIdName={},l.beanNameId={},l.eventData=new function(){this.x=0,this.y=0,this.screenX=0,this.screenY=0,this.deltaX=0,this.deltaY=0,this.isMoved=!1,this.targetTypeName=null,this.targetUsage=null,this.targetObject=null},l.baseZIndex=0,l.setBaseZIndex=function(e){l.baseZIndex=e},l.getBaseZIndex=function(){return l.baseZIndex},l.canvasElement=document.createElement(B.CANVAS.HTML_ELEMENT),l.canvasElement.style.zIndex=2e3,l.canvasElement.id=l.id,l.canvasElement.style.boxSizing="border-box",l.canvasElement.style.position="absolute",l.canvasElement.style.left=parseInt(n)+"px",l.canvasElement.style.top=parseInt(r)+"px",l.canvasElement.style.width=parseInt(a)+B.CANVAS.WIDTH_ADJUST_20180722+"px",l.canvasElement.style.height=parseInt(o)+B.CANVAS.HEIGHT_ADJUST_20180722+"px",l.canvasElement.style.backgroundColor="transparent",l.canvasElement.style.borderStyle="none",l.canvasElement.style.margin="0px",l.canvasElement.style.borderWidth="0px",l.canvasElement.style.borderColor="transparent",l.parentElement.appendChild(l.canvasElement)}function T(e,t,n,r,a,o,l,s){var i=this;T.superConstructor.call(this,e,t,n,r,a,o),i.anchor=x.LEFT_TOP,i.showTitleBar=s.showTitleBar,i.canvasNetHeight=null,i.canvasNetWidth=null,i.frameHeightAdjust=s.frameHeightAdjust,i.frameComponentMap={},i.canvas=null,i.myCanvasId=null,i.floatingButton=null,i.titleBarClassNameDefault=B.CFRAME.TITLE_BAR_CLASS_DEFAULT,i.titleBarClassNameFocused=B.CFRAME.TITLE_BAR_CLASS_FOCUSED,i.titleBarHeight=s.titleBarHeight,i.titleBarCaption=s.titleBarCaption,i.titleBarCaptionLeftMargin=s.titleBarCaptionLeftMargin,i.titleBarCaptionFontSize=s.titleBarCaptionFontSize,i.titleBarCaptionFontWeight=s.titleBarCaptionFontWeight,i.titleBarBorderBottomDefault=s.titleBarBorderBottomDefault,i.titleBarBorderBottomFocused=s.titleBarBorderBottomFocused,i.titleAdjustWidth=2,i.windowId=e,i.exBorderWidth=0,i.myCanvasId=e+"_canvas";var p=document.createElement("img");if(p.src="",p.style.position="absolute",p.style.left="2px",p.style.top="2px",p.style.width="16px",p.style.height="16px",p.style.visibility="hidden",i.titleBar=document.createElement("div"),i.titleBar.className="jsframetitlebar",i.showTitleBar){if(i.titleBar.id=e+"_title",i.titleBar.style.position="absolute",i.titleBar.style.boxSizing="border-box",i.titleBar.style.top="0px",i.titleBar.style.left="0px",i.titleBar.style.width=r-i.titleAdjustWidth+B.CANVAS.WIDTH_ADJUST_20180722+"px",i.titleBar.style.userSelect="none",i.titleBarHeight){var m=0;i.titleBarBorderBottomDefault&&(m=0),i.titleBar.style.height=parseInt(i.titleBarHeight,10)+0+"px"}i.titleBar.style.backgroundColor=i.titleBarColorDefault,i.titleBar.style.zIndex=0,i.titleBar.style.color=i.titleBarCaptionColorDefault,i.titleBar.style.fontSize=i.titleBarCaptionFontSize,i.titleBar.style.fontWeight=i.titleBarCaptionFontWeight,i.titleBar.style.textShadow="0 1px 0 rgba(255,255,255,.7)",i.titleBar.style.textAlign="center",i.titleBar.style.lineHeight=i.titleBar.style.height,i.titleBar.style.borderBottom=i.titleBarBorderBottomDefault,i.titleBar.style.overflow="hidden";var h=document.createTextNode(""),d=document.createElement("span");d.id=i.id+"_titleBarText",null!=i.titleBarCaptionLeftMargin?(d.style.position="absolute",d.style.left=parseInt(i.titleBarCaptionLeftMargin,10)+"px"):(d.style.position="absolute",d.style.left="0px",d.style.right="0px"),d.style.top="0px",d.appendChild(h),i.titleBar.appendChild(d)}i.htmlElement.appendChild(i.titleBar);var u=parseInt(i.titleBarHeight,10)-m,c=parseInt(i.titleAdjustWidth,10);i.showTitleBar||(m=c=u=0),i.canvasNetWidth=r-c,i.canvasNetHeight=a-u-c-1-m+i.frameHeightAdjust,i.htmlElement.style.cursor="move",i.canvas=new I(i.htmlElement,i.myCanvasId,0,u,r-c,a-u-c),i.canvas.canvasElement.style.backgroundColor=B.CFRAME.CANVAS_ELEMENT_BGCOLOR,i.canvas.canvasElement.style.cursor="default",i.canvas.canvasElement.onmousedown=i.canvasMouseDown,i.canvas.canvasElement.parentCFrame=i;var f=parseInt(i.canvas.canvasElement.style.width,10),y=parseInt(i.canvas.canvasElement.style.height,10),E=new w(i.myCanvasId+"_RD",f-16+16,y-16+16,16,16,0,"RD");E.htmlElement.style.cursor="se-resize",E.htmlElement.argX=0,E.htmlElement.argY=0;var v=new w(i.myCanvasId+"_DD",0,y-16+16,f-16+16,16,0,"DD");v.htmlElement.style.cursor="n-resize",v.htmlElement.argX=0,v.htmlElement.argY=0;var g=new w(i.myCanvasId+"_RR",f-16+16,0,16,y-16+16,0,"RR");for(var C in g.htmlElement.style.cursor="w-resize",g.htmlElement.argY=0,g.htmlElement.argX=0,i.canvas.addBean(E),i.canvas.addBean(v),i.canvas.addBean(g),i.removeMarkers=function(){i.canvas.removeBean(E.id),i.canvas.removeBean(v.id),i.canvas.removeBean(g.id),i.htmlElement.style.cursor="default"},i.removeMarkers2=function(){i.canvas.removeBean(E.id),i.canvas.removeBean(v.id),i.canvas.removeBean(g.id)},s.frameComponents){var b=s.frameComponents[C];b.setFrame(i),"closeButton"==b.id&&(b.htmlElement.onclick=i.close),i.addFrameComponent(b)}i.htmlElement.style.backgroundColor="transparent",i.htmlElement.oncontextmenu=this.contextMenu;i.caribValue=0,i.htmlElement.style.borderWidth=i.exBorderWidth+"px",i.htmlElement.style.width=parseInt(i.htmlElement.style.width,10)-0+"px",i.htmlElement.style.height=parseInt(i.htmlElement.style.height,10)-0+1+"px",i.htmlElement.typeName="cwindow",i.htmlElement.overflow="auto",i.htmlElement.style.boxSizing="content-box",s.frameBorderStyle&&(i.htmlElement.style.borderStyle=s.frameBorderStyle),s.frameBoxShadow&&(i.htmlElement.style.boxShadow=s.frameBoxShadow),0<parseInt(s.frameBorderWidthDefault,10)&&(i.htmlElement.style.borderWidth=s.frameBorderWidthDefault,i.htmlElement.style.borderColor=s.frameBorderColorDefault),0<parseInt(s.frameBorderRadius,10)&&(i.htmlElement.style.borderRadius=s.frameBorderRadius),i.onCloseFrameListener=null}function u(e,t,n,r,a,o){var l=t,s=n,i=r,p=a,m=o.zindex,h=this;this.minFrameWidth=128,this.minWindowHeight=32,this.overrayTransparentScreenEnabled=!1,this.overrayTransparentScreenOnResize=!0,this.titleBarColorFocused=o.titleBarColorFocused,this.titleBarColorDefault=o.titleBarColorDefault,this.titleBarCaptionColorDefault=o.titleBarCaptionColorDefault,this.titleBarCaptionColorFocused=o.titleBarCaptionColorFocused,u.superConstructor.call(h,e,l,s,i,p,m,null,o),h.frameBorderColorDefault=o.frameBorderColorDefault,h.frameBorderColorFocused=o.frameBorderColorFocused,h.frameBorderWidthDefault=o.frameBorderWidthDefault,h.frameBorderWidthFocused=o.frameBorderWidthFocused,h.iframe=null,h.ifDelta=0,h.resizable=!0,h.onMouseMoveOnIframe=null,h.onMouseUpOnIframe=null,h._hasFocus=!1,h._hasFocusTime=0,h.htmlElement.typeName="cifwindow";var d="riversun_"+e;h.dframe=document.createElement("div"),h.iframe=document.createElement("iframe"),h.iframe.name=d,h.iframe.id=d,h.iframe.frameBorder="0",h.iframe.scrolling="no",h.iframe.zIndex=-1,h.iframe.allowTransparency="true",h.iframe.width=h.canvasNetWidth-h.ifDelta+0,h.iframe.height=h.canvasNetHeight-h.ifDelta+0,h.showTitleBar=o.showTitleBar,h.getFrameInnerBorderRadius=o.getFrameInnerBorderRadius,h.frameBorderRadius=o.frameBorderRadius,h.adjustFrameBorderRadius(),h.useIframe=!1,h.canvas.canvasElement.appendChild(h.iframe),h.canvas.canvasElement.appendChild(h.dframe),this.setUseIframe=function(e){h.useIframe=e,h.iframe.style.visibility="hidden",h.iframe.style.position="absolute",h.iframe.style.left="0px",h.iframe.style.top="0px",h.iframe.style.width="100%",h.iframe.style.height="100%",h.dframe.style.visibility="hidden",h.dframe.style.position="absolute",h.dframe.style.left="0px",h.dframe.style.boxSizing="content-box",h.dframe.style.top="0px",h.dframe.style.width="100%",h.dframe.style.height="100%",h.dframe.style.backgroundColor="white",h.dframe.style.visibility=e?(h.iframe.style.visibility="visible","hidden"):(h.iframe.style.visibility="hidden","visible")},h.setUseIframe(o.useIframe),(h.overrayTransparentScreenEnabled||h.overrayTransparentScreenOnResize)&&(h.transparence=document.createElement("span"),h.transparence.style.position="absolute",h.transparence.style.left="0px",h.transparence.style.top="0px",h.transparence.style.width="0px",h.transparence.style.height="0px",h.transparence.style.zIndex=4,h.transparence.style.borderWidth="0px",h.transparence.style.borderColor="#ff00ee",h.transparence.style.cursor="default",h.canvas.canvasElement.style.backgroundColor=o.frameBackgroundColor,h.canvas.canvasElement.appendChild(h.transparence))}function s(e,t,n,r,a,o){s.superConstructor.call(this,e,t,n,r,a,o);var l=this;document.body.addEventListener("click",function(e){for(var t in l.beanList){l.beanList[t].onBodyClicked(e)}})}function w(e,t,n,r,a,o,l){var s=this;w.superConstructor.call(this,e,t,n,r,a,o,l),s.htmlElement.typeName="cmarkerwindow",s.htmlElement.usage=l,s.htmlElement.isRangeLimited=!1,s.htmlElement.style.borderStyle="none",s.htmlElement.style.zIndex=1}function l(e){var t=this;document.onmouseup=function(e){t.windowManager.windowMouseUp(e)},document.onmousemove=function(e){t.windowManager.windowMouseMove(e);e.pageX,e.pageY},e||(e=document.body),t.windowManager=new s(e,"windowManager_"+t.generateUUID(),0,0,0,0),t.domPartsBuilder=null}function i(e,t,n,r,a){var o=this;o.id=e,o.x=n,o.y=r,o.frame=null,o._focusTakingCallabck=null,o._focusReleasingCallabck=null,o.frameComponentAlign=a||x.LEFT_TOP,o.htmlElement=t,o.htmlElement.style.zIndex=50}function p(){}function m(){this.size=14,this.width=null,this.height=null,this.borderRadius=2,this.borderWidth=0,this.borderColorDefault="#aaaaaa",this.borderColorFocused=this.borderColorDefault,this.borderColorHovered=null,this.borderColorPressed=this.borderColorDefault,this.borderStyleDefault="solid",this.borderStyleFocused=this.borderStyleDefault,this.borderStyleHovered=null,this.borderStylePressed=this.borderStyleDefault,this.backgroundBoxShadow=null,this.backgroundColorDefault="transparent",this.backgroundColorFocused=this.backgroundColorDefault,this.backgroundColorHovered=null,this.backgroundColorPressed=this.backgroundColorDefault,this.caption="❌",this.captionColorDefault="white",this.captionColorFocused=this.captionColorDefault,this.captionColorHovered=null,this.captionColorPressed=this.captionColorDefault,this.captionShiftYpx=0,this.captionFontRatio=1}function h(){this.fps=30,this.durationMillis=200,this.targetFrame=null,this._crrWidth=0,this._crrHeight=0,this._toWidth=0,this._toHeight=0,this._toX=0,this._toY=0,this.pinnedAnimationEnabled=!1,this._pinX=0,this._pinY=0,this._pinAnchor=null}x.LEFT_TOP="LEFT_TOP",x.HCENTER_TOP="CENTER_TOP",x.RIGHT_TOP="RIGHT_TOP",x.LEFT_VCENTER="LEFT_CENTER",x.HCENTER_VCENTER="CENTER_CENTER",x.CENTER=x.HCENTER_VCENTER,x.RIGHT_VCENTER="RIGHT_CENTER",x.LEFT_BOTTOM="LEFT_BOTTOM",x.HCENTER_BOTTOM="CENTER_BOTTOM",x.RIGHT_BOTTOM="RIGHT_BOTTOM",r.prototype.getPartsBuilder=function(){return null===this._partsBuilder&&(this._partsBuilder=new p),this._partsBuilder},r.prototype.initialize=function(){this.onInitialize()},r.prototype.addFrameComponent=function(e,t,n,r,a){var o=new i(e,t,n,r,a);return t._onTakeFocus&&t._onReleaseFocus&&o.setFocusCallback(t._onTakeFocus,t._onReleaseFocus),this.frameComponents.push(o),o},B.CBEAN={},B.CBEAN.HTML_ELEMENT="span",B.CBEAN.HTML_ELEMENT_ID_PREFIX="htmlElement_",B.CBEAN.TYPE_NAME="bean",o.prototype.setMovable=function(e){var t=this;return t.htmlElement.argY=e?t.htmlElement.argX=1:t.htmlElement.argX=0,t},o.prototype.setParentCanvas=function(e){this.parentCanvas=e,this.htmlElement.parentCanvas=this.parentCanvas},o.prototype.setOnExternalAreaClickedListener=function(e){this.externalAreaClickedListener=e},o.prototype.onBodyClicked=function(e){var t=this,n=e.pageX,r=e.pageY,a=parseInt(t.htmlElement.style.left),o=parseInt(t.htmlElement.style.top),l=parseInt(t.htmlElement.style.width),s=parseInt(t.htmlElement.style.height);a<n&&n<a+l&&o<r&&r<o+s||t.externalAreaClickedListener&&t.externalAreaClickedListener()},o.prototype.onmouseDown=function(e){var t=this,n=t.parent;if(0==e.button)(t.parentCanvas.currentObject=t).parentCanvas.pullUp(n.id);else if(2==e.button)return!1;return t.parentCanvas.offsetX=e.pageX-parseInt(t.parentCanvas.currentObject.style.left,10),t.parentCanvas.offsetY=e.pageY-parseInt(t.parentCanvas.currentObject.style.top,10),!1},B.CANVAS={},B.CANVAS.HTML_ELEMENT="div",B.CANVAS.WIDTH_ADJUST_20180722=2,B.CANVAS.HEIGHT_ADJUST_20180722=3,I.prototype.mouseMove=function(e){var t=this;if(t.currentObject){t.eventData.targetTypeName=t.currentObject.typeName,t.eventData.targetUsage=t.currentObject.usage,t.eventData.targetObject=t.currentObject;var n=e.pageX-t.offsetX,r=e.pageY-t.offsetY,a=(e.pageX,e.pageY,t.currentObject.style.left),o=t.currentObject.style.top,l=parseInt(n,10),s=parseInt(r,10),i=l+parseInt(t.currentObject.style.width,10),p=s+parseInt(t.currentObject.style.height,10),m=parseInt(t.canvasElement.style.width,10),h=parseInt(t.canvasElement.style.height,10),d=0,u=0;return 1==t.currentObject.isRangeLimited&&(l<=0||m<i||s<=0||h<p)?u=d=0:(d=parseInt(n,10)-parseInt(a,10),u=parseInt(r,10)-parseInt(o,10),t.currentObject.style.left=parseInt(t.currentObject.style.left)+d*t.currentObject.argX+"px",t.currentObject.style.top=parseInt(t.currentObject.style.top)+u*t.currentObject.argY+"px"),t.eventData.deltaX=d,t.eventData.deltaY=u,t.eventData}return null},I.prototype.mouseUp=function(e){this.currentObject=null,this.mouseDownSource=null},I.prototype.pullUp=function(e){var t=[],n=this.beanList;for(var r in n)t.push(n[r]);var a=n[e];this.pullUpSort(a,t,this.baseZIndex),this.onTopObject=a},I.prototype.pullUpSort=function(e,t,n){for(var r in e.htmlElement.style.zIndex=t.length+n,t.sort(function(e,t){return-parseInt(e.htmlElement.style.zIndex,10)+parseInt(t.htmlElement.style.zIndex,10)}),t)t[r].htmlElement.style.zIndex=t.length-1-r+n},I.prototype.removeBean=function(e){var t=this.beanList,n=t[e];this.canvasElement.removeChild(n.htmlElement),delete t[e]},I.prototype.addBean=function(e){var t=this,n=t.beanList,r=t.beanIdName,a=t.beanNameId;(n[e.id]=e).property.name&&(a[e.property.name]=e.id,r[e.id]=e.property.name);var o=0;for(var l in n)o++;e.htmlElement.style.zIndex=o+t.baseZIndex,e.setParentCanvas(t),this.canvasElement.appendChild(e.htmlElement)},B.CFRAME={},B.CFRAME.CANVAS_ELEMENT_BGCOLOR="transparent",B.CFRAME.TITLE_BAR_CLASS_DEFAULT="jsFrame.titlebar",B.CFRAME.TITLE_BAR_CLASS_FOCUSED="jsFrame.titlebar.focused",a(T,o),T.prototype.setTitleBarClassName=function(e,t){return e&&(this.titleBarClassNameDefault=e,this.titleBarClassNameFocused=e),t&&(this.titleBarClassNameFocused=t),this},T.prototype.addFrameComponent=function(e){return this.frameComponentMap[e.id]=e,this.canvas.canvasElement.appendChild(e.htmlElement),this},T.prototype.getFrameComponentElement=function(e){return this.frameComponentMap[e].htmlElement},T.prototype.removeFrameComponentById=function(e){var t=this.frameComponentMap[e];this.canvas.canvasElement.removeChild(t.htmlElement),delete this.frameComponentMap[e]},T.prototype.setTitle=function(e){if(this.showTitleBar){var t=document.createTextNode(e);this.titleBar.firstChild.replaceChild(t,this.titleBar.firstChild.firstChild)}return this},T.prototype.resize=function(e,t,n,r){var a=this,o=parseInt(a.htmlElement.style.left,10),l=parseInt(a.htmlElement.style.top,10),s=parseInt(a.htmlElement.style.width,10),i=parseInt(a.htmlElement.style.height,10);a.htmlElement.style.left=parseInt(o+e,10)+"px",a.htmlElement.style.top=parseInt(l+t,10)+"px",a.htmlElement.style.width=parseInt(s+n,10)+"px",a.htmlElement.style.height=parseInt(i+r,10)+"px";var p=parseInt(a.canvas.canvasElement.style.width,10),m=parseInt(a.canvas.canvasElement.style.height,10);for(var h in a.canvas.canvasElement.style.width=p+n+"px",a.canvas.canvasElement.style.height=m+r+"px",a.showTitleBar&&(a.titleBar.style.width=p+n+"px"),a.canvas.beanList){var d=a.canvas.beanList[h];"cmarkerwindow"==d.htmlElement.typeName&&("RD"==d.htmlElement.usage?(d.htmlElement.style.left=parseInt(d.htmlElement.style.left,10)+n+"px",d.htmlElement.style.top=parseInt(d.htmlElement.style.top,10)+r+"px"):"DD"==d.htmlElement.usage?(d.htmlElement.style.width=parseInt(d.htmlElement.style.width,10)+n+"px",d.htmlElement.style.top=parseInt(d.htmlElement.style.top,10)+r+"px"):"RR"==d.htmlElement.usage&&(d.htmlElement.style.left=parseInt(d.htmlElement.style.left,10)+n+"px",d.htmlElement.style.height=parseInt(d.htmlElement.style.height,10)+r+"px"))}},T.prototype.canvasMouseDown=function(e){null==this.parentCFrame.parentCanvas.mouseDownSource&&(this.parentCFrame.parentCanvas.mouseDownSource="childcanvas")},T.prototype.mouseUp=function(e){this.canvas.mouseUp(e)},T.prototype.close=function(e){this.parentObject.parentCanvas.removeBean(this.parentObject.id)},T.prototype.closeFrame=function(e){this.parentCanvas.removeBean(this.windowId),this.onCloseFrameListener&&this.onCloseFrameListener(this)},T.prototype.setOnCloseFrameListener=function(e){this.onCloseFrameListener=e},T.prototype.contextMenu=function(){return!1},T.prototype.setTitleBarTextColor=function(e){this.titleBar.style.color=e},T.prototype.setPosition=function(e,t,n){var r=this.getWidth(),a=this.getHeight();return this._setPositionInternally(e,t,n,r,a),this},T.prototype._setPositionInternally=function(e,t,n,r,a){var o=this;n&&(o.anchor=n),n&&x.LEFT_TOP!=n?x.HCENTER_TOP==n?(o.htmlElement.style.left=-r/2+e+"px",o.htmlElement.style.top=t+"px"):x.RIGHT_TOP==n?(o.htmlElement.style.left=-r+e+"px",o.htmlElement.style.top=t+"px"):x.LEFT_VCENTER==n?(o.htmlElement.style.left=e+"px",o.htmlElement.style.top=-a/2+t+"px"):x.HCENTER_VCENTER==n?(o.htmlElement.style.left=-r/2+e+"px",o.htmlElement.style.top=-a/2+t+"px"):x.RIGHT_VCENTER==n?(o.htmlElement.style.left=-r+e+"px",o.htmlElement.style.top=-a/2+t+"px"):x.LEFT_BOTTOM==n?(o.htmlElement.style.left=e+"px",o.htmlElement.style.top=-a+t+"px"):x.HCENTER_BOTTOM==n?(o.htmlElement.style.left=-r/2+e+"px",o.htmlElement.style.top=-a+t+"px"):x.RIGHT_BOTTOM==n&&(o.htmlElement.style.left=-r+e+"px",o.htmlElement.style.top=-a+t+"px"):(o.htmlElement.style.left=e+"px",o.htmlElement.style.top=t+"px")},T.prototype.getPosition=function(){var e,t,n=this,r=n.getWidth(),a=n.getHeight(),o=n.anchor;return o&&x.LEFT_TOP!=o?x.HCENTER_TOP==o?(e=parseInt(n.htmlElement.style.left,10)+r/2,t=parseInt(n.htmlElement.style.top,10)):x.RIGHT_TOP==o?(e=parseInt(n.htmlElement.style.left,10)+r,t=parseInt(n.htmlElement.style.top,10)):x.LEFT_VCENTER==o?(e=parseInt(n.htmlElement.style.left,10),t=parseInt(n.htmlElement.style.top,10)+a/2):x.HCENTER_VCENTER==o?(e=parseInt(n.htmlElement.style.left,10)+r/2,t=parseInt(n.htmlElement.style.top,10)+a/2):x.RIGHT_VCENTER==o?(e=parseInt(n.htmlElement.style.left,10)+r,t=parseInt(n.htmlElement.style.top,10)+a/2):x.LEFT_BOTTOM==o?(e=parseInt(n.htmlElement.style.left,10),t=parseInt(n.htmlElement.style.top,10)+a):x.HCENTER_BOTTOM==o?(e=parseInt(n.htmlElement.style.left,10)+r/2,t=parseInt(n.htmlElement.style.top,10)+a):x.RIGHT_BOTTOM==o&&(e=parseInt(n.htmlElement.style.left,10)+r,t=parseInt(n.htmlElement.style.top,10)+a):(e=parseInt(n.htmlElement.style.left,10),t=parseInt(n.htmlElement.style.top,10)),{x:e,y:t,anchor:o}},T.prototype.getLeft=function(){return parseInt(this.htmlElement.style.left,10)},T.prototype.getTop=function(){return parseInt(this.htmlElement.style.top,10)},T.prototype.getWidth=function(){return parseInt(this.htmlElement.style.width,10)},T.prototype.getHeight=function(){return parseInt(this.htmlElement.style.height,10)},T.prototype.setSize=function(e,t){return this.resize(0,0,e-this.getWidth(),t-this.getHeight(),!0),this},T.prototype.getWindowId=function(){return this.windowId},T.prototype.getName=function(){return this.property.name},T.prototype.setName=function(e){this.property.name=e},a(u,T),u.prototype.getFrameView=function(){return this.dframe},u.prototype.setHTML=function(e){this.dframe.innerHTML=e},u.prototype.$=function(e){return this.useIframe?this.iframe.contentWindow.document.querySelector(e):this.dframe.querySelector(e)},u.prototype.adjustFrameBorderRadius=function(){var e=this;if(0<parseInt(e.frameBorderRadius,10)){var t=e.getFrameInnerBorderRadius(e,e._hasFocus);e.showTitleBar?(e.canvas.canvasElement.style.borderBottomRightRadius=t,e.canvas.canvasElement.style.borderBottomLeftRadius=t,e.iframe.style.borderBottomRightRadius=t,e.iframe.style.borderBottomLeftRadius=t,e.titleBar.style.borderTopLeftRadius=t,e.titleBar.style.borderTopRightRadius=t):(e.canvas.canvasElement.style.borderRadius=t,e.iframe.style.borderRadius=t),e.dframe&&(e.dframe.style.borderBottomRightRadius=t,e.dframe.style.borderBottomLeftRadius=t)}},u.prototype.handleReleasingFocus=function(e){var t=this;for(var n in t._hasFocus=!1,t.titleBar.style.backgroundColor=t.titleBarColorDefault,t.titleBar.style.color=t.titleBarCaptionColorDefault,t.frameBorderColorDefault&&(t.htmlElement.style.borderColor=t.frameBorderColorDefault),t.frameBorderWidthDefault&&(t.htmlElement.style.borderWidth=t.frameBorderWidthDefault,t.adjustFrameBorderRadius()),"cifwindow"==t.htmlElement.typeName&&t.overrayTransparentScreenEnabled&&(t.transparence.style.width=parseInt(t.iframe.width,10)+"px",t.transparence.style.height=parseInt(t.iframe.height,10)+"px"),t.frameComponentMap){t.frameComponentMap[n].handleReleasingFocus()}return t.titleBarBorderBottomDefault&&(t.titleBar.style.borderBottom=t.titleBarBorderBottomDefault),t.titleBar.className=t.titleBarClassNameDefault,t},u.prototype.handleTakingFocus=function(e){var t=this;for(var n in t._hasFocus=!0,t._hasFocus=Date.now(),t.overrayTransparentScreenEnabled&&(t.transparence.style.width="0px",t.transparence.style.height="0px"),t.titleBar.style.backgroundColor=t.titleBarColorFocused,t.titleBar.style.color=t.titleBarCaptionColorFocused,t.frameBorderColorFocused&&(t.htmlElement.style.borderColor=t.frameBorderColorFocused),t.frameBorderWidthFocused&&(t.htmlElement.style.borderWidth=t.frameBorderWidthFocused,t.adjustFrameBorderRadius()),t.titleBarBorderBottomFocused&&(t.titleBar.style.borderBottom=t.titleBarBorderBottomFocused),t.frameComponentMap){t.frameComponentMap[n].handleTakingFocus()}return t.titleBar.className=t.titleBarClassNameFocused,t},u.prototype.show=function(){return this.htmlElement.style.visibility="visible",this.requestFocus(),this},u.prototype.hide=function(){return this.htmlElement.style.visibility="hidden",this},u.prototype.onmouseDown=function(e){document.body.ondrag=function(){return!1},this.decorator=T.prototype.onmouseDown,this.decorator(e);var t=this.parent,n=this.parentCanvas;for(var r in n.beanList){var a=n.beanList[r];r==t.getWindowId()||a.handleReleasingFocus()}t.handleTakingFocus()},u.prototype.mouseUp=function(e){var t=this;(t.overrayTransparentScreenEnabled||t.overrayTransparentScreenOnResize)&&(t.parentCanvas.onTopObject==t?(t.transparence.style.width="0px",t.transparence.style.height="0px"):t.overrayTransparentScreenEnabled&&(t.transparence.style.width=parseInt(t.iframe.width)+"px",t.transparence.style.height=parseInt(t.iframe.height)+"px")),t.decorator=T.prototype.mouseUp,t.decorator(e),document.body.ondrag=null,document.body.onselectstart=null},u.prototype.setMinFrameSize=function(e,t){this.minFrameWidth=e,this.minWindowHeight=t},u.prototype.resize=function(e,t,n,r,a){var o=this;if(!o.resizable)return null;var l=parseInt(o.htmlElement.style.left,10),s=parseInt(o.htmlElement.style.top,10),i=parseInt(o.htmlElement.style.width,10),p=parseInt(o.htmlElement.style.height,10);a&&i+n<o.minFrameWidth&n<0&&(o.htmlElement.style.width=i+"px",n=0),a&&p+r<o.minWindowHeight&r<0&&(o.htmlElement.style.height=p,r=0),o.htmlElement.style.left=l+e+"px",o.htmlElement.style.top=s+t+"px",o.htmlElement.style.width=i+n+"px",o.htmlElement.style.height=p+r+"px";var m=parseInt(o.canvas.canvasElement.style.width,10),h=parseInt(o.canvas.canvasElement.style.height,10);for(var d in o.canvas.canvasElement.style.width=m+n+"px",o.canvas.canvasElement.style.height=h+r+"px",o.titleBar.style.width=m-o.ifDelta+n+0+"px",o.iframe.width=m-o.ifDelta+n+0+"px",o.iframe.height=h-o.ifDelta+r+o.frameHeightAdjust+"px",(o.overrayTransparentScreenEnabled||o.overrayTransparentScreenOnResize)&&(o.transparence.style.width=parseInt(o.iframe.width)+"px",o.transparence.style.height=parseInt(o.iframe.height)+"px"),o.frameComponentMap){o.frameComponentMap[d].updateAlign()}for(var u in o.canvas.beanList){var c=o.canvas.beanList[u];"cmarkerwindow"==c.htmlElement.typeName&&("RD"==c.htmlElement.usage?(c.htmlElement.style.left=parseInt(c.htmlElement.style.left)+n+"px",c.htmlElement.style.top=parseInt(c.htmlElement.style.top)+r+"px"):"DD"==c.htmlElement.usage?(c.htmlElement.style.width=parseInt(c.htmlElement.style.width)+n+"px",c.htmlElement.style.top=parseInt(c.htmlElement.style.top)+r+"px"):"RR"==c.htmlElement.usage&&(c.htmlElement.style.left=parseInt(c.htmlElement.style.left)+n+"px",c.htmlElement.style.height=parseInt(c.htmlElement.style.height)+r+"px"))}},u.prototype.resizeDirect=function(e,t,n){var r=this;if(!r.resizable)return null;r.htmlElement.style.width=e+"px",r.htmlElement.style.height=t+"px";parseInt(r.canvas.canvasElement.style.width),parseInt(r.canvas.canvasElement.style.height);for(var a in r.canvas.canvasElement.style.width=e+"px",r.canvas.canvasElement.style.height=t-r.titleBar.style.height+"px",r.titleBar.style.width=e-r.ifDelta+"px",r.iframe.width=e-r.ifDelta+"px",r.iframe.height=t-r.ifDelta+r.frameHeightAdjust+"px",(r.overrayTransparentScreenEnabled||r.overrayTransparentScreenOnResize)&&(r.transparence.style.width=parseInt(r.iframe.width)+"px",r.transparence.style.height=parseInt(r.iframe.height)+"px"),r.frameComponentMap){r.frameComponentMap[a].updateAlign()}for(var o in r.canvas.beanList){var l=r.canvas.beanList[o];"cmarkerwindow"==l.htmlElement.typeName&&("RD"==l.htmlElement.usage?(l.htmlElement.style.left=e+"px",l.htmlElement.style.top=t+"px"):"DD"==l.htmlElement.usage?(l.htmlElement.style.width=e+"px",l.htmlElement.style.top=t+"px"):"RR"==l.htmlElement.usage&&(l.htmlElement.style.left=e+"px",l.htmlElement.style.height=t+"px"))}},u.prototype.requestFocus=function(){var e=this.parentCanvas.beanList;for(var t in e){var n=e[t];t==this.getWindowId()?n.handleTakingFocus():n.handleReleasingFocus()}this.parentCanvas.pullUp(this.id)},u.prototype.setUrl=function(n){var a=this;return new Promise(function(e,t){n?a.setUseIframe(!0):(a.setUseIframe(!1),e()),a.iframe.src=n,a.iframe.onload=function(){a.iframe.contentWindow.document.onmousemove=function(e){var t=a.getLeft(),n=a.getTop(),r=document.createEvent("MouseEvents");r.initMouseEvent("mousemove",!0,!1,window,e.detail,e.screenX,e.screenY,e.pageX+t,e.pageY+n,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,null),a.parentCanvas.windowMouseMove(r),a.onMouseMoveOnIframe&&a.onMouseMoveOnIframe(r)},a.iframe.contentWindow.document.onmouseup=function(e){var t=a.getLeft(),n=a.getTop(),r=document.createEvent("MouseEvents");r.initMouseEvent("mouseup",!0,!1,window,e.detail,e.screenX,e.screenY,e.pageX+t,e.pageY+n,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,null),a.parentCanvas.windowMouseUp(r),a.onMouseUpOnIframe&&a.onMouseUpOnIframe(r)},e(a.iframe.contentWindow.document)}})},u.prototype.getIfDocument=function(){return this.iframe.contentWindow.document},u.prototype.setScrolling=function(e){this.iframe.scrolling=e},u.prototype.getScrolling=function(e){return this.iframe.scrolling},u.prototype.setResizable=function(e){return(this.resizable=e)||this.removeMarkers2(),this},a(s,I),s.prototype.getWindow=function(e){return this.beanList[e]},s.prototype.addWindow=function(e){var t=e.getWindowId(),n=e.getName();this.beanIdName[t]=n,this.beanNameId[n]=t,this.addBean(e)},s.prototype.containsWindowName=function(e){if(this.beanNameId[e])return!0},s.prototype.getWindowByName=function(e){var t=this.beanNameId[e];return t?this.getWindow(t):null},s.prototype.windowMouseMove=function(e){if(null==this.currentObject)return null;var t=!1,n=this.beanList;for(var r in n){var a=n[r],o=a.canvas.mouseMove(e);if(t|=null!=o,null!=o&&"cmarkerwindow"==o.targetTypeName){var l=o.targetObject;"RD"==l.usage?a.resize(0,0,o.deltaX,o.deltaY,!0):"DD"==l.usage?a.resize(0,0,0,o.deltaY,!0):"RR"==l.usage&&a.resize(0,0,o.deltaX,0,!0)}}t||"childcanvas"==this.mouseDownSource||this.mouseMove(e)},s.prototype.windowMouseUp=function(e){this.mouseUp(e);var t=this.beanList;for(var n in t){t[n].mouseUp(e)}},s.prototype.removeBean=function(e){var t=this,n=t.beanList,r=n[e];if(null!=r){var a=r._hasFocus;t.canvasElement.removeChild(r.htmlElement),delete n[e];var o=t.beanIdName[e];o&&(delete t.beanIdName[e],delete t.beanNameId[o]);var l=0,s=null;if(a){for(var e in n){var i=n[e];l<=i._hasFocusTime&&(l=i._hasFocusTime,s=i)}s&&s.requestFocus()}}},a(w,o),l.prototype.getDomPartsBuilder=function(){return this.domPartsBuilder||(this.domPartsBuilder=new p),this.domPartsBuilder},l.prototype.createFrame=function(e,t,n,r,a,o){a||(a=this.createFrameAppearance()),a.initialize();var l=new u("window_"+this.generateUUID(),e,t,n,r,a);return o&&o.windowName&&l.setName(o.windowName),l.hide(),this.windowManager.addWindow(l),l},l.prototype.containsWindowName=function(e){return this.windowManager.containsWindowName(e)},l.prototype.getWindowByName=function(e){return this.windowManager.getWindowByName(e)},l.prototype.generateUUID=function(){var n=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==e?t:3&t|8).toString(16)})},l.prototype.createFrameAppearance=function(){return new r},l.prototype.createAnimator=function(){return new h},i.prototype.setFocusCallback=function(e,t){this._focusTakingCallabck=e,this._focusReleasingCallabck=t},i.prototype.setFrame=function(e){this.frame=e,this.htmlElement.parentObject=e,this.updateAlign()},i.prototype.updateAlign=function(){var e=this,t=e.frameComponentAlign,n=e.frame,r=e.htmlElement.style;r.userSelect="none";var a=e.x,o=e.y,l=n.getWidth(),s=n.getHeight(),i=r.width,p=r.height;x.LEFT_TOP==t?(r.left=a+"px",r.top=o+"px"):x.HCENTER_TOP==t?(r.left=parseInt(l)/2-parseInt(i)/2+a+"px",r.top=o+"px"):x.RIGHT_TOP==t?(r.left=parseInt(l)-parseInt(i)+a+"px",r.top=o+"px"):x.LEFT_VCENTER==t?(r.left=a+"px",r.top=parseInt(s)/2-parseInt(p)/2+o+"px"):x.HCENTER_VCENTER==t?(r.left=parseInt(l)/2-parseInt(i)/2+a+"px",r.top=parseInt(s)/2-parseInt(p)/2+o+"px"):x.RIGHT_VCENTER==t?(r.left=parseInt(l)-parseInt(i)+a+"px",r.top=parseInt(s)/2-parseInt(p)/2+o+"px"):x.LEFT_BOTTOM==t?(r.left=a+"px",r.top=parseInt(s)-parseInt(p)+o+"px"):x.HCENTER_BOTTOM==t?(r.left=parseInt(l)/2-parseInt(i)/2+a+"px",r.top=parseInt(s)-parseInt(p)+o+"px"):x.RIGHT_BOTTOM==t&&(r.left=parseInt(l)-parseInt(i)+a+"px",r.top=parseInt(s)-parseInt(p)+o+"px")},i.prototype.handleTakingFocus=function(){this._focusTakingCallabck&&this._focusTakingCallabck()},i.prototype.handleReleasingFocus=function(){this._focusReleasingCallabck&&this._focusReleasingCallabck()},p.prototype.buildTextButtonAppearance=function(){return new m},p.prototype.buildButton=function(e){return this.buildTextButton(e)},p.prototype.buildTextButton=function(e){var t=e.size,n=t,r=t;null!=e.width&&(n=e.width),null!=e.height&&(r=e.height);var a=document.createElement("div"),o=e.borderWidth,l=e.borderRadius,s=e.borderColorDefault,i=e.borderColorFocused,p=e.borderColorHovered,m=e.borderColorPressed,h=e.borderStyleDefault,d=e.borderStyleFocused,u=e.borderStyleHovered,c=e.borderStylePressed,f=e.backgroundColorDefault,y=e.backgroundColorFocused,E=e.backgroundColorHovered,v=e.backgroundColorPressed,g=e.backgroundBoxShadow,C=e.caption,b=e.imageDefault,B=e.imageFocused,x=e.imageHovered,I=e.imagePressed;b&&(b.style.pointerEvents="none"),B&&(B.style.pointerEvents="none"),x&&(x.style.pointerEvents="none"),I&&(I.style.pointerEvents="none");var T=e.captionColorDefault,w=e.captionColorFocused,_=e.captionColorHovered,F=e.captionColorPressed,R=e.captionShiftYpx,D=e.captionFontRatio;a._hasFrameFocus=!1,a._isMouseDown=!1,a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.style.width=n+"px",a.style.height=r+"px",a.style.cursor="pointer",a.onmousedown=function(e){a._isMouseDown=!0,a._handleFocusDrawing("onmousedown")},a.onmouseout=function(e){a._isMouseDown=!1,a._handleFocusDrawing("onmouseout")},a.onmouseover=function(e){a._handleHoverDrawing()},a.onmouseup=function(e){a._isMouseDown=!1,a._handleFocusDrawing("onmouseup")},a._onTakeFocus=function(){a._hasFrameFocus=!0,a._handleFocusDrawing("_onTakeFocus")},a._onReleaseFocus=function(){a._hasFrameFocus=!1,a._handleFocusDrawing("_onReleaseFocus")},a._handleFocusDrawing=function(e){a._hasFrameFocus?a._isMouseDown?(a.style.borderColor=m,a.style.borderStyle=c,a.style.backgroundColor=v,a.style.color=F,I&&(a.innerHTML="",a.appendChild(I),"onmousedown"==e&&a.onclick)):(a.style.borderColor=i,a.style.borderStyle=d,a.style.backgroundColor=y,a.style.color=w,B&&(a.innerHTML="",a.appendChild(B))):a._isMouseDown?(a.style.borderColor=m,a.style.borderStyle=c,a.style.backgroundColor=v,a.style.color=F,I&&(a.innerHTML="",a.appendChild(I))):(a.style.borderColor=s,a.style.borderStyle=h,a.style.backgroundColor=f,a.style.color=T,b&&(a.innerHTML="",a.appendChild(b)))},a._handleHoverDrawing=function(){a._hasFrameFocus,p&&(a.style.borderColor=p),u&&(a.style.borderStyle=u),E&&(a.style.backgroundColor=E),_&&(a.style.color=_),x&&(a.innerHTML="",a.appendChild(x))},a.style.textAlign="center",a.style.fontSize=r*D+"px",a.style.lineHeight=r+"px",a.style.borderWidth="1px",null!=o&&(a.style.borderWidth=o+"px"),null!=g&&(a.style.boxShadow=g),a.style.borderRadius=l+parseInt(a.style.borderWidth)+"px";if(b)a.innerHTML="",a.appendChild(b);else if(C){var M=document.createElement("span");M.style.width="100%",M.style.marginTop=R+"px",M.style.display="inline-block",M.style.textAlign="center",M.style.fontFamily="sans-serif",M.appendChild(document.createTextNode(C)),a.appendChild(M)}else 0;return a._handleFocusDrawing(),a},h.prototype.set=function(e){var t=this;t.targetFrame=e,t.fromWidth(e.getWidth()),t.fromHeight(e.getHeight()),t.toWidth(e.getWidth()),t.toHeight(e.getHeight());var n=e.getPosition();return t.fromPosition(n.x,n.y,n.anchor),t},h.prototype.get=function(){return this.targetFrame},h.prototype.setDuration=function(e){return this.durationMillis=e,this},h.prototype.setFPS=function(e){return this.fps=e,this},h.prototype.fromPosition=function(e,t,n){var r=this;return r.pinnedAnimationEnabled=!0,r._pinX=e,r._pinY=t,r.toPosition(e,t),n&&(r._pinAnchor=n),r},h.prototype.fromWidth=function(e){return this._crrWidth=e,this},h.prototype.fromHeight=function(e){return this._crrHeight=e,this},h.prototype.toWidth=function(e){return this._toWidth=e,this},h.prototype.toHeight=function(e){return this._toHeight=e,this},h.prototype.toPosition=function(e,t){return this._toX=e,this._toY=t,this},h.prototype.toX=function(e){return this._toX=e,this},h.prototype.toY=function(e){return this._toY=e,this},h.prototype.start=function(a){var d=this,u=d._crrWidth,c=d._crrHeight,f=d._pinX,y=d._pinY;return new Promise(function(o,e){var l=parseInt(d.fps*(d.durationMillis/1e3)),s=(d._toWidth-u)/l,i=(d._toHeight-c)/l,p=(d._toX-f)/l,m=(d._toY-y)/l,t=d.durationMillis/l,h=0;function n(){var e=new E;e.setIntervalMillis(t),e.setCallback(function(e){if(h==l){var t=d._toWidth,n=d._toHeight,r=f+p*h,a=y+m*h;d.pinnedAnimationEnabled&&d.targetFrame._setPositionInternally(r,a,d._pinAnchor,t,n),d.targetFrame.resizeDirect(t,n),d._crrWidth=t,d._crrHeight=n,d._pinX=r,d._pinY=a}if(h==l+1)return e.stopTimer(),void o(d);t=u+s*h,n=c+i*h,r=f+p*h,a=y+m*h;d.pinnedAnimationEnabled&&d.targetFrame._setPositionInternally(r,a,d._pinAnchor,t,n),d.targetFrame.resizeDirect(t,n),0==h&&d.targetFrame.show(),h++}),e.startTimer()}if(a){var r=new E;r.setIntervalMillis(a),r.setCallback(function(e){e.stopTimer(),n()}),r.startTimer()}else n()})};var E=function(){function e(){var e=this;e._timerId=null,e._isRunning=!1,e._timerInterval=0,e._internalCallback=function(){e._timerMethod&&e._timerMethod(e);e._isRunning&&(clearTimeout(e._timerId),e._timerId=setTimeout(e._internalCallback,e._timerInterval))},e._timerMethod=null}return e.prototype.setCallback=function(e){return this._timerMethod=e,this},e.prototype.setIntervalMillis=function(e){return this._timerInterval=e,this},e.prototype.stopTimer=function(){return this._isRunning=!1,this},e.prototype.startTimer=function(){var e=this;return 0<e._timerInterval&&(e._timerId=setTimeout(e._internalCallback,e._timerInterval),e._isRunning=!0),e},e}();Object.freeze(B)}])});